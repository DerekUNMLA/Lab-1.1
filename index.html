<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Lab 1 – Scientific Data • Tutorial + Practice Quiz + Pre‑Lab</title>
  <style>
    :root{
      --bg:#0b1020;
      --panel:#141a32;
      --muted:#9bb0ff;
      --text:#e9edff;
      --accent:#6be675;
      --accent2:#6bd1e6;
      --warn:#ffb84d;
      --danger:#ff6666;
      --ok:#66ffcc;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 100% -20%, #1b2450 0%, rgba(27,36,80,0) 60%),
        radial-gradient(1000px 600px at -10% 120%, #1a2c3f 0%, rgba(26,44,63,0) 60%),
        var(--bg);
      line-height:1.5;
    }
    header{
      position:sticky; top:0; z-index:10;
      background:linear-gradient(180deg, rgba(20,26,50,0.95), rgba(20,26,50,0.75));
      backdrop-filter: blur(6px);
      border-bottom:1px solid rgba(255,255,255,0.08);
    }
    .wrap{max-width:1000px; margin:0 auto; padding:0 16px}
    .nav{display:flex; align-items:center; gap:12px; padding:12px 0; flex-wrap:wrap}
    .brand{display:flex; gap:10px; align-items:center; font-weight:800}
    .logo{width:36px; height:36px; border-radius:10px; display:grid; place-items:center; background:conic-gradient(from 200deg, #6be675, #3fca89, #6bd1e6, #9bb0ff, #6be675); color:#00140a; font-weight:900}
    .spacer{flex:1}
    .progress{display:flex; gap:10px; align-items:center; min-width:200px}
    .bar{position:relative; height:8px; flex:1; background:rgba(255,255,255,0.08); border-radius:99px; overflow:hidden}
    .bar i{position:absolute; inset:0 auto 0 0; width:0%; background:linear-gradient(90deg, var(--accent), var(--accent2))}
    .pct{color:var(--muted); font-weight:700; font-variant-numeric:tabular-nums}
    main{padding:24px 0 80px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border:1px solid rgba(255,255,255,0.08); border-radius:16px; padding:18px; box-shadow:0 10px 40px rgba(0,0,0,0.35)}
    h1{margin:.2em 0 .4em; font-size:1.7rem}
    h2{margin:.2em 0 .4em; font-size:1.25rem; color:var(--muted)}
    h3{margin:.6rem 0 .4rem; font-size:1.1rem}
    p{margin:.4em 0}
    ul{margin:.5em 0 .5em 1.2em}
    li{margin:.25em 0}
    .pill{display:inline-block; padding:6px 10px; border-radius:999px; font-size:.8rem; background:rgba(107,214,230,0.12); color:var(--muted); border:1px solid rgba(255,255,255,0.08)}
    .panel{background:var(--panel); border:1px solid rgba(255,255,255,0.08); border-radius:14px; padding:16px}
    .cta{display:flex; gap:8px; flex-wrap:wrap}
    button{-webkit-tap-highlight-color:transparent; appearance:none; border:none; cursor:pointer; background:linear-gradient(180deg, #79f08a, #3fca89); color:#062012; padding:10px 14px; border-radius:12px; font-weight:800; box-shadow:0 6px 18px rgba(121,240,138,.25)}
    button.secondary{background:linear-gradient(180deg, #6bd1e6, #3ca6c4); color:#06161d; box-shadow:0 6px 18px rgba(107,209,230,.25)}
    button.ghost{background:transparent; color:var(--muted); border:1px solid rgba(255,255,255,0.12); box-shadow:none}
    .screen{display:none}
    .screen.active{display:block}
    .navtabs{display:flex; gap:8px; flex-wrap:wrap; margin:.2rem 0 .6rem}
    .navtabs button{padding:8px 12px; border-radius:10px; font-weight:700; font-size:.95rem; background:rgba(255,255,255,0.04); color:var(--text); border:1px solid rgba(255,255,255,0.08)}
    .navtabs button.active{background:linear-gradient(180deg, #6be675, #3fca89); color:#072013; border-color:transparent; box-shadow:0 6px 18px rgba(121,240,138,.25)}
    .slide{display:none; animation:.35s fade ease}
    .slide.active{display:block}
    @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:translateY(0)}}
    .q{margin:.8rem 0; padding:.6rem .6rem .2rem; border-radius:10px; background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.08)}
    .q h4{margin:0 0 .4rem; font-size:1rem}
    .choices{display:grid; gap:6px}
    .choice{display:flex; gap:10px; align-items:flex-start; padding:10px; border-radius:10px; border:1px solid rgba(255,255,255,0.08); background:rgba(255,255,255,0.02)}
    .choice input{margin-top:2px}
    .feedback{margin:.4rem 0 .1rem; font-weight:700; display:none}
    .feedback.ok{color:var(--ok)}
    .feedback.no{color:var(--danger)}
    .pager{display:flex; gap:8px; align-items:center; justify-content:space-between; margin-top:10px}
    .page-info{color:var(--muted); font-weight:700}
    .callout{border-left:4px solid var(--accent2); padding:10px 12px; background:rgba(107,209,230,0.08); border-radius:8px; margin:.6em 0}
    .callout.warn{border-left-color:var(--warn); background:rgba(255,184,77,0.08)}
    .quiz-controls{display:flex; gap:10px; flex-wrap:wrap; margin-top:10px}
    footer{color:var(--muted); text-align:center; padding:30px 0 60px}
    .kbd{border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.08); border-bottom-width:3px; padding:2px 6px; border-radius:6px; font-weight:700; font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace}
    .celebrate,.encourage{border:1px solid rgba(255,255,255,0.12); border-radius:14px; padding:16px; margin-top:14px}
    .celebrate{background:linear-gradient(180deg, rgba(107,230,117,0.12), rgba(107,209,230,0.12))}
    .encourage{background:linear-gradient(180deg, rgba(255,184,77,0.12), rgba(255,102,102,0.10))}
    /* Pre‑Lab + Certificate */
    .prelab-field{width:100%; padding:12px 12px; border-radius:10px; border:1px solid rgba(255,255,255,0.28); background:rgba(255,255,255,0.10); color:var(--text); font-weight:600}
    .prelab-field::placeholder{color:#cfd6ff}
    select.prelab-field{background:rgba(107,209,230,0.15); color:#fff; border-color:rgba(255,255,255,0.45)}
    select.prelab-field option{color:#0b1020; background:#e9edff; font-weight:700; padding:8px}
    select.prelab-field option:checked{background:#c9dbff}
    .cert{border:2px solid #fff; border-radius:16px; padding:18px; background:rgba(255,255,255,0.04); margin-top:16px}
    img.responsive{max-width:100%; height:auto; border-radius:10px; border:1px solid rgba(255,255,255,0.12)}
    .two-col{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .tip{font-size:.9rem; color:#cfe2ff}
    .ex{background:rgba(255,255,255,0.03); border:1px dashed rgba(255,255,255,0.15); padding:10px; border-radius:10px}
    code.k{background:rgba(255,255,255,0.08); padding:2px 6px; border-radius:6px}
    @media (max-width:780px){ .two-col{grid-template-columns:1fr} }
    @media (max-width:420px){h1{font-size:1.35rem}.logo{width:32px; height:32px}.nav{gap:8px}}
    @media print{
      header, .cta, .pager, .quiz-controls, .navtabs, .progress, footer { display:none !important; }
      body{background:#fff; color:#000}
      .card{box-shadow:none; border:1px solid #000}
    }
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <div class="nav">
        <div class="brand">
          <div class="logo">SD</div>
          <div>
            <div>Lab 1 – Scientific Data</div>
            <div class="pill">Biology 1140L • UNM-LA</div>
          </div>
        </div>
        <div class="spacer"></div>
        <div class="progress" aria-label="Progress">
          <div class="bar" aria-hidden="true"><i id="progressFill"></i></div>
          <div class="pct" id="progressPct">0%</div>
        </div>
      </div>
    </div>
  </header>

  <main class="wrap">
    <!-- Screen 1: Welcome -->
    <section id="welcomeScreen" class="screen active">
      <section class="card">
        <h1>Welcome to Lab 1: Scientific Data</h1>
        <p>Learn to identify data types, choose the right graph, label axes and scales, and write clear conclusions. Then complete a Practice Quiz and the required Pre‑Lab.</p>
        <div class="panel">
          <h2>What you’ll practice</h2>
          <ul>
            <li>Quantitative vs. qualitative data</li>
            <li>Tables vs. graphs—when to use each</li>
            <li>X–Y scatter plots, bar graphs, and logarithmic scales</li>
            <li>Independent vs. dependent variables; axes, units, scale, range</li>
            <li>Trend lines and interpretation</li>
            <li>Doorknob dataset application</li>
          </ul>
          <div class="callout"><strong>Tip:</strong> Titles should tell the story, not just list variables.</div>
        </div>
        <div class="cta" style="margin-top:10px">
          <button id="startBtn">Start Tutorial</button>
          <button class="secondary" id="resumeBtn" style="display:none">Resume</button>
        </div>
      </section>
    </section>

    <!-- Screen 2: Menu + Slides -->
    <section id="menuScreen" class="screen">
      <section class="card">
        <h2>Select a page</h2>
        <div class="navtabs" id="menuTabs"></div>
        <div class="pager" style="margin-top:0">
          <button id="backToWelcome" class="ghost">← Back to Welcome</button>
          <span class="pill">Tip: Use ← → keys or tap Next</span>
          <button id="goToFirst" class="secondary">Go to Page 1 →</button>
        </div>
      </section>

      <section class="card" style="margin-top:16px">
        <div id="slides"></div>
        <div class="pager">
          <button id="prevBtn" class="ghost" disabled="">← Back</button>
          <div class="page-info" id="pageInfo">Page 1 of 10</div>
          <button id="nextBtn">Next →</button>
        </div>
      </section>
    </section>

    <!-- Screen 3: Practice Quiz -->
    <section id="quizScreen" class="screen">
      <section class="card" style="margin-top:16px">
        <h2>Practice Quiz: 10 Questions</h2>
        <p>Score 80% or higher to unlock the Pre‑Lab.</p>
        <div id="quiz"></div>
        <div class="quiz-controls">
          <button id="submitQuiz">Submit Practice Quiz</button>
          <button class="ghost" id="retryQuiz" style="display:none">Retry</button>
          <span id="quizScore" class="pill" style="display:none"></span>
        </div>

        <div id="celebration" class="celebrate" style="display:none">
          <h3>Congratulations! You graphed like a pro 📈🧪</h3>
          <p>You scored 80% or higher—great job. Fun fact: A best‑fit line doesn’t “connect the dots”; it summarizes the trend so you can compare and predict.</p>
          <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
            <button id="toPrelab" class="secondary">Continue to Pre‑Lab →</button>
            <button id="reviewLessons" class="ghost">Review Lessons</button>
            <button id="retakeQuiz" class="ghost">Retake Practice Quiz</button>
          </div>
        </div>

        <div id="encouragement" class="encourage" style="display:none">
          <h3>Keep going—you’re close!</h3>
          <p>You scored below 80%. Review the tricky pages and try again. Focus on graph choice, axes with units, and independent vs. dependent variables.</p>
          <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
            <button id="reviewFromEncourage" class="ghost">Review Lessons</button>
            <button id="retakeFromEncourage" class="secondary">Retake Practice Quiz</button>
          </div>
        </div>
      </section>
    </section>

    <!-- Screen 4: Pre‑Lab -->
    <section id="prelabScreen" class="screen">
      <section class="card" style="margin-top:16px">
        <h2>Pre‑Lab: Scientific Data (10 pts)</h2>
        <p>Complete the questions below. After you submit, you’ll see your answers and receive a completion certificate to begin the Scientific Data Lab.</p>
        <div class="panel" style="margin-bottom:10px">
          <div class="two-col">
            <div>
              <label>Your Name</label><br>
              <input id="plName" class="prelab-field" placeholder="First Last" autocomplete="name">
            </div>
            <div>
              <label>Date</label><br>
              <input id="plDate" class="prelab-field" type="date">
            </div>
          </div>
        </div>

        <form id="prelabForm">
          <div class="q">
            <h4>1) Select correct term (3 pts): ________ data are measurements to gather numerical data.</h4>
            <div class="choices">
              <label class="choice"><input type="radio" name="q1" value="Qualitative"> Qualitative</label>
              <label class="choice"><input type="radio" name="q1" value="Quantitative"> Quantitative</label>
            </div>
          </div>

          <div class="q">
            <h4>2) True or False (3 pts): A Table shows information, rather than clearly show a relationship between variables.</h4>
            <div class="choices">
              <label class="choice"><input type="radio" name="q2" value="True"> True</label>
              <label class="choice"><input type="radio" name="q2" value="False"> False</label>
            </div>
          </div>

          <div class="q">
            <h4>3) Fill in the blanks (4 pts): Time (hours) is labeled on the ________‑axis and % Survival is labeled on the ______‑axis.</h4>
            <div class="choices" style="display:grid; gap:8px">
              <div>
                <label>Time (hours) axis</label><br>
                <select name="q3_time" class="prelab-field" style="max-width:340px">
                  <option value="">Select axis…</option>
                  <option value="x-axis">x‑axis</option>
                  <option value="y-axis">y‑axis</option>
                </select>
              </div>
              <div>
                <label>% Survival axis</label><br>
                <select name="q3_survival" class="prelab-field" style="max-width:340px">
                  <option value="">Select axis…</option>
                  <option value="x-axis">x‑axis</option>
                  <option value="y-axis">y‑axis</option>
                </select>
              </div>
            </div>
            <div class="tip" style="margin-top:6px">Hint: Time is usually the independent variable.</div>
            <!-- Direct image link -->
            <div style="margin-top:10px">
              <img class="responsive" src="https://i.imgur.com/2LiYQY8.png" alt="FIG. 1 Killing of E. coli by antibiotics – ampicillin vs ofloxacin over time">
              <div class="pill" style="margin-top:6px">
                If the image doesn’t load, open the direct link: https://i.imgur.com/2LiYQY8.png
              </div>
            </div>
          </div>

          <div class="quiz-controls">
            <button type="submit" id="submitPrelab">Submit Pre‑Lab</button>
            <button type="button" id="resetPrelab" class="ghost">Clear</button>
          </div>
        </form>

        <div id="prelabResults" class="panel" style="display:none; margin-top:12px">
          <h3>Your Pre‑Lab Answers</h3>
          <ul id="answersList" style="margin-left:1.2em"></ul>
          <div class="cert">
            <h3 style="margin-top:0">Certificate of Completion – Scientific Data Pre‑Lab</h3>
            <p><strong>Name:</strong> <span id="certName">—</span></p>
            <p><strong>Date:</strong> <span id="certDate">—</span></p>
            <p><strong>Status:</strong> Completed the Scientific Data Pre‑Lab and is authorized to begin the Scientific Data Lab.</p>
            <div class="callout warn" style="margin-top:10px">
              Save your answers and certificate: Right‑click → Print → Save as PDF. Then upload the PDF to Canvas.
            </div>
            <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap">
              <button id="reviewLessonsFromPrelab" class="ghost" type="button">Review Lessons</button>
            </div>
          </div>
        </div>
      </section>
    </section>

    <footer>
      <p>Pro tip: Press <span class="kbd">←</span> and <span class="kbd">→</span> to navigate pages. Your progress is saved in your browser.</p>
    </footer>
  </main>

  <script>
    // Enhanced, more detailed slide content with examples, mini-scenarios, and quick tips
    const PAGE_CONTENT = [
      {
        title:"Why Scientific Data Matters",
        html:
          '<h2>Data tells a story you can act on</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<p>From dosing antibiotics to triaging patients, data helps us make safer, faster decisions. Good figures turn complex measurements into clear insights.</p>'+
              '<ul>'+
                '<li>Reduce errors by standardizing axes and units.</li>'+
                '<li>Spot patterns quickly using the right graph type.</li>'+
                '<li>Communicate findings to teammates and patients.</li>'+
              '</ul>'+
              '<div class="callout"><strong>Real world:</strong> A clinic tracks wait times. A weekly scatter plot with a trend line reveals a steady drop after a new intake protocol.</div>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Micro-case</h3>'+
              '<p>You compare two wound-care dressings. With a bar graph of mean healing days by dressing, the faster option stands out instantly.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q0" value="b"> Clear presentation helps teams decide.</label>'+
          '<label class="choice"><input type="radio" name="q0" value="a"> Presentation is optional.</label>'+
          '</div><div class="feedback" data-for="q0"></div></div>'
        , answer:"b"
      },
      {
        title:"Types of Data",
        html:
          '<h2>Quantitative vs. Qualitative</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<h3>Quantitative (numbers)</h3>'+
              '<ul>'+
                '<li>Examples: mass (g), temperature (°C), colony count (CFU/mL).</li>'+
                '<li>Supports averages, trend lines, and statistical tests.</li>'+
              '</ul>'+
              '<h3>Qualitative (descriptions)</h3>'+
              '<ul>'+
                '<li>Examples: color change, odor present/absent, growth: yes/no.</li>'+
                '<li>Great for categories, checklists, or coded scales.</li>'+
              '</ul>'+
              '<p class="tip">Pro tip: When possible, quantify qualitative observations (e.g., use a 0–3 scale).</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Try classifying</h3>'+
              '<ul>'+
                '<li>pH 4.2 → <em>quantitative</em></li>'+
                '<li>“Blue‑green colonies” → <em>qualitative</em></li>'+
                '<li>“Strong odor” (0–3 scale) → <em>semi‑quantitative</em></li>'+
              '</ul>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q1" value="a"> “Blue‑green” is quantitative.</label>'+
          '<label class="choice"><input type="radio" name="q1" value="b"> pH 4.2 is quantitative.</label>'+
          '</div><div class="feedback" data-for="q1"></div></div>'
        , answer:"b"
      },
      {
        title:"Tables vs. Graphs",
        html:
          '<h2>When to use each</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<h3>Use a table when</h3>'+
              '<ul>'+
                '<li>You need exact values or many variables.</li>'+
                '<li>You will export to statistics software.</li>'+
              '</ul>'+
              '<h3>Use a graph when</h3>'+
              '<ul>'+
                '<li>You want to show relationships and patterns.</li>'+
                '<li>Readers must compare groups quickly.</li>'+
              '</ul>'+
              '<p class="tip">Ask: “Do I want precision (table) or pattern (graph)?”</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Example</h3>'+
              '<p>Five time points × two treatments: use an X–Y scatter for the pattern; put raw values in a supplemental table.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q2" value="b"> Tables = values; graphs = trends.</label>'+
          '<label class="choice"><input type="radio" name="q2" value="a"> No difference.</label>'+
          '</div><div class="feedback" data-for="q2"></div></div>'
        , answer:"b"
      },
      {
        title:"X–Y Scatter Plot Essentials",
        html:
          '<h2>Match variables to axes</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li><strong>Independent variable → x‑axis</strong> (what you control or sort by).</li>'+
                '<li><strong>Dependent variable → y‑axis</strong> (what responds).</li>'+
                '<li>Always include units and a sensible range.</li>'+
              '</ul>'+
              '<p class="tip">Common x‑axes: time, dose, distance, trial number.</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Example</h3>'+
              '<p>Antibiotic killing curve: x = time (hours), y = % survival. Add a trend line to compare drugs.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q3" value="a"> Dependent on x</label>'+
          '<label class="choice"><input type="radio" name="q3" value="b"> Independent on x</label>'+
          '</div><div class="feedback" data-for="q3"></div></div>'
        , answer:"b"
      },
      {
        title:"Legends & Trend Lines",
        html:
          '<h2>Reveal patterns without clutter</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Use a <strong>legend</strong> for multiple series (e.g., Drug A vs Drug B).</li>'+
                '<li><strong>Best‑fit</strong> lines summarize the overall trend.</li>'+
                '<li>Do not connect scatter points unless showing temporal trajectory for the same subject.</li>'+
              '</ul>'+
              '<p class="tip">If dots are noisy but the line is clear, you’ve made a strong figure.</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Mini‑exercise</h3>'+
              '<p>Given two antibiotics, draw two colors, add a legend, and fit one trend per drug to compare killing rates.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q4" value="b"> Best‑fit summarizes trend.</label>'+
          '<label class="choice"><input type="radio" name="q4" value="a"> Always connect dots.</label>'+
          '</div><div class="feedback" data-for="q4"></div></div>'
        , answer:"b"
      },
      {
        title:"Bar Graphs",
        html:
          '<h2>Compare categories at a glance</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Use bars for discrete groups (e.g., classroom vs bathroom).</li>'+
                '<li>Use error bars (SD or SEM) if showing means.</li>'+
                '<li>Start the y‑axis at zero to avoid visual exaggeration.</li>'+
              '</ul>'+
              '<p class="tip">Two groups, one time point? Bar graph. Many time points? Consider a scatter/line chart.</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Example</h3>'+
              '<p>Day 4 colony counts: two bars side‑by‑side make the comparison immediate.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q5" value="b"> Score distribution → bar.</label>'+
          '<label class="choice"><input type="radio" name="q5" value="a"> Time vs. age → bar.</label>'+
          '</div><div class="feedback" data-for="q5"></div></div>'
        , answer:"b"
      },
      {
        title:"Log Scales",
        html:
          '<h2>See across orders of magnitude</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Use when data spans 10×, 100×, 1000× differences.</li>'+
                '<li>Equal steps represent multiplication (e.g., ×10), not addition.</li>'+
                '<li>Log scales cannot include zero or negative values.</li>'+
              '</ul>'+
              '<p class="tip">Label ticks as 10, 100, 1000 (not 1, 2, 3).</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Example</h3>'+
              '<p>Bacterial counts from 10² to 10⁶ CFU/mL: log y‑axis makes all ranges visible in one plot.</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q6" value="a"> Includes zero.</label>'+
          '<label class="choice"><input type="radio" name="q6" value="b"> Powers of ten.</label>'+
          '</div><div class="feedback" data-for="q6"></div></div>'
        , answer:"b"
      },
      {
        title:"Conclusions",
        html:
          '<h2>Write what the figure actually shows</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Reference axes, direction of change, and comparisons.</li>'+
                '<li>Avoid overstating beyond the figure.</li>'+
                '<li>If relevant, note magnitude (e.g., ~2× higher).</li>'+
              '</ul>'+
              '<p class="tip">Template: “As X increased, Y decreased; Drug A reduced Y faster than Drug B.”</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Example conclusion</h3>'+
              '<p>“% survival declined over time for both antibiotics, with ofloxacin reducing survival faster than ampicillin.”</p>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q7" value="b"> Interpret specific axes/variables.</label>'+
          '<label class="choice"><input type="radio" name="q7" value="a"> Ignore units.</label>'+
          '</div><div class="feedback" data-for="q7"></div></div>'
        , answer:"b"
      },
      {
        title:"Apply It: Doorknobs",
        html:
          '<h2>Choose the right view for your question</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Over time (Day 1–5) for two locations → X–Y scatter with two series.</li>'+
                '<li>Single day comparison → a bar graph with two bars.</li>'+
                '<li>Make the title specific: include day and locations.</li>'+
              '</ul>'+
              '<p class="tip">Independent variable: Day (time). Dependent: Colony count.</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Two deliverables</h3>'+
              '<ol>'+
                '<li>Time series scatter for all days.</li>'+
                '<li>Day 4 bar graph (bathroom vs classroom).</li>'+
              '</ol>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Which graph?</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q8" value="b"> X–Y scatter for over‑time.</label>'+
          '<label class="choice"><input type="radio" name="q8" value="a"> Pie charts.</label>'+
          '</div><div class="feedback" data-for="q8"></div></div>'
        , answer:"b"
      },
      {
        title:"You Draw",
        html:
          '<h2>Build a publication‑quality figure</h2>'+
          '<div class="two-col">'+
            '<div>'+
              '<ul>'+
                '<li>Specific title: “Half‑Marathon Winners: Winning Time Increases with Age (n=20)”.</li>'+
                '<li>Axes labeled with units; uniform, readable ticks.</li>'+
                '<li>Legend for groups; avoid chartjunk.</li>'+
              '</ul>'+
              '<p class="tip">Use the fewest colors needed; ensure contrast and legibility.</p>'+
            '</div>'+
            '<div class="ex">'+
              '<h3>Checklist</h3>'+
              '<ul>'+
                '<li>Title tells the takeaway.</li>'+
                '<li>Independent → x; Dependent → y.</li>'+
                '<li>Units on both axes.</li>'+
                '<li>Appropriate scale (linear vs log).</li>'+
              '</ul>'+
            '</div>'+
          '</div>'+
          '<div class="q"><h4>Quick check</h4><div class="choices">'+
          '<label class="choice"><input type="radio" name="q9" value="a"> “Time vs. Bacteria” is enough.</label>'+
          '<label class="choice"><input type="radio" name="q9" value="b"> Make titles specific.</label>'+
          '</div><div class="feedback" data-for="q9"></div></div>'
        , answer:"b"
      }
    ];

    // Quiz unchanged (still aligned with expanded content)
    const QUIZ = [
      { q:"Which statement correctly pairs variable with axis on an X–Y scatter plot?", choices:["Dependent → x; Independent → y","Independent → x; Dependent → y","Both on y","Doesn’t matter"], a:1 },
      { q:"Best use for a bar graph:", choices:["Trend over time","Comparing group means","Age vs VO2 max relationship","Dose‑response over orders of magnitude"], a:1 },
      { q:"A good axis label includes:", choices:["Variable","Units","Variable + units","Emoji"], a:2 },
      { q:"A best‑fit line should:", choices:["Connect points","Summarize trend","Always start at zero","Be curved"], a:1 },
      { q:"Which title is more meaningful?", choices:["Age vs. Winning Time","Winning Time Increases with Age (Half‑Marathon Winners)"], a:1 },
      { q:"When is a logarithmic scale useful?", choices:["Values span orders of magnitude","Values 0–10","Equal spacing per unit","Only negative values"], a:0 },
      { q:"Compare bathroom vs classroom at Day 4:", choices:["X–Y scatter","Bar graph (two bars)","Pie chart","Line graph all days"], a:1 },
      { q:"Independent variable in doorknob time‑series:", choices:["Colonies","Day (time)","Doorknob type","Temperature"], a:1 },
      { q:"Axis range must start at zero:", choices:["Always","Only for bar charts","Never","Only for log scales"], a:1 },
      { q:"Clear figure‑level conclusion:", choices:["Restate all numbers","Interpret trend and compare groups","State hypothesis only","List citations"], a:1 }
    ];

    const state = {
      current: 0,
      answers: {},
      quizAnswers: Array(QUIZ.length).fill(null),
      quizPassed: false,
      prelab: { name:'', date:'', q1:null, q2:null, q3_time:'', q3_survival:'' }
    };

    // DOM refs
    const welcomeScreen = document.getElementById('welcomeScreen');
    const menuScreen = document.getElementById('menuScreen');
    const quizScreen = document.getElementById('quizScreen');
    const prelabScreen = document.getElementById('prelabScreen');

    const menuTabs = document.getElementById('menuTabs');
    const slidesEl = document.getElementById('slides');
    const startBtn = document.getElementById('startBtn');
    const resumeBtn = document.getElementById('resumeBtn');
    const backToWelcomeBtn = document.getElementById('backToWelcome');
    const goToFirstBtn = document.getElementById('goToFirst');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const pageInfo = document.getElementById('pageInfo');
    const progressFill = document.getElementById('progressFill');
    const progressPct = document.getElementById('progressPct');

    const quizEl = document.getElementById('quiz');
    const submitQuizBtn = document.getElementById('submitQuiz');
    const retryQuizBtn = document.getElementById('retryQuiz');
    const quizScoreEl = document.getElementById('quizScore');
    const celebration = document.getElementById('celebration');
    const encouragement = document.getElementById('encouragement');
    const reviewLessonsBtn = document.getElementById('reviewLessons');
    const retakeQuizBtn = document.getElementById('retakeQuiz');
    const reviewFromEncourageBtn = document.getElementById('reviewFromEncourage');
    const retakeFromEncourageBtn = document.getElementById('retakeFromEncourage');
    const toPrelabBtn = document.getElementById('toPrelab');

    // Pre‑Lab DOM
    const prelabForm = document.getElementById('prelabForm');
    const plName = document.getElementById('plName');
    const plDate = document.getElementById('plDate');
    const submitPrelabBtn = document.getElementById('submitPrelab');
    const resetPrelabBtn = document.getElementById('resetPrelab');
    const prelabResults = document.getElementById('prelabResults');
    const answersList = document.getElementById('answersList');
    const certName = document.getElementById('certName');
    const certDate = document.getElementById('certDate');
    const reviewLessonsFromPrelabBtn = document.getElementById('reviewLessonsFromPrelab');

    function showScreen(which){
      [welcomeScreen, menuScreen, quizScreen, prelabScreen].forEach(s=>s.classList.remove('active'));
      which.classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function buildMenu(){
      menuTabs.innerHTML = '';
      PAGE_CONTENT.forEach((p, idx)=>{
        const b = document.createElement('button');
        b.textContent = (idx+1)+'. '+p.title;
        b.addEventListener('click', ()=>{ goTo(idx); });
        menuTabs.appendChild(b);
      });
    }
    function buildSlides(){
      slidesEl.innerHTML = '';
      PAGE_CONTENT.forEach((p, idx)=>{
        const s = document.createElement('div');
        s.className = 'slide';
        s.setAttribute('data-index', String(idx));
        s.innerHTML = p.html;
        slidesEl.appendChild(s);
      });
      wireQuickChecks();
      updateActive();
    }
    function wireQuickChecks(){
      PAGE_CONTENT.forEach((p, i)=>{
        const name = 'q'+i;
        const inputs = slidesEl.querySelectorAll('input[name="'+name+'"]');
        inputs.forEach(inp=>{
          inp.addEventListener('change', ()=>{
            state.answers[name] = inp.value;
            const fb = slidesEl.querySelector('.feedback[data-for="'+name+'"]');
            if(fb){
              fb.style.display = 'block';
              if(inp.value === p.answer){
                fb.textContent = 'Correct! ✔';
                fb.className = 'feedback ok';
                setTimeout(()=>{
                  if(i < PAGE_CONTENT.length-1){ goTo(i+1); } else { goToPracticeQuiz(); }
                  updateProgress();
                  saveState();
                }, 450);
              } else {
                fb.textContent = 'Try again.';
                fb.className = 'feedback no';
              }
            }
            updateProgress();
            saveState();
          });
        });
      });
    }

    function goTo(idx){
      state.current = Math.max(0, Math.min(PAGE_CONTENT.length-1, idx));
      updateActive();
      saveState();
    }
    function updateActive(){
      const slides = Array.from(slidesEl.children);
      slides.forEach((el, i)=> el.classList.toggle('active', i === state.current));
      const tabs = Array.from(menuTabs.children);
      tabs.forEach((b, i)=> b.classList.toggle('active', i === state.current));

      prevBtn.disabled = state.current === 0;
      nextBtn.disabled = false;
      pageInfo.textContent = 'Page ' + (state.current + 1) + ' of ' + PAGE_CONTENT.length;

      updateProgress();
      resumeBtn.style.display = (state.current>0 || Object.keys(state.answers).length>0) ? 'inline-flex' : 'none';
    }
    function updateProgress(){
      let correct = 0;
      for(let i=0;i<PAGE_CONTENT.length;i++){
        if(state.answers['q'+i] === PAGE_CONTENT[i].answer){ correct++; }
      }
      const pct = Math.round(100 * correct / PAGE_CONTENT.length);
      progressFill.style.width = pct + '%';
      progressPct.textContent = pct + '%';
    }

    function saveState(){ try{ localStorage.setItem('lab1ScientificData_all', JSON.stringify(state)); }catch(e){} }
    function loadState(){
      try{
        const raw = localStorage.getItem('lab1ScientificData_all');
        if(!raw) return;
        const data = JSON.parse(raw);
        if(data){
          state.current = typeof data.current==='number' ? data.current : 0;
          state.answers = data.answers || {};
          state.quizAnswers = Array.isArray(data.quizAnswers) ? data.quizAnswers : Array(QUIZ.length).fill(null);
          state.quizPassed = !!data.quizPassed;
          state.prelab = data.prelab || state.prelab;
        }
      }catch(e){}
    }

    function buildQuiz(){
      quizEl.innerHTML = '';
      QUIZ.forEach((item, idx)=>{
        const q = document.createElement('div');
        q.className = 'q';
        const h = document.createElement('h4');
        h.textContent = (idx+1)+') '+item.q;
        q.appendChild(h);

        const choices = document.createElement('div');
        choices.className = 'choices';
        item.choices.forEach((c, ci)=>{
          const label = document.createElement('label');
          label.className = 'choice';
          const input = document.createElement('input');
          input.type = 'radio';
          input.name = 'quiz-'+idx;
          input.value = String(ci);
          if(state.quizAnswers[idx] === ci) input.checked = true;
          input.addEventListener('change', ()=>{ state.quizAnswers[idx] = ci; saveState(); });
          const span = document.createElement('span');
          span.textContent = c;
          label.appendChild(input); label.appendChild(span);
          choices.appendChild(label);
        });
        q.appendChild(choices);
        quizEl.appendChild(q);
      });
    }
    function goToPracticeQuiz(){
      if(!quizEl.children.length){ buildQuiz(); }
      showScreen(quizScreen);
    }

    nextBtn.addEventListener('click', ()=>{
      if(state.current >= PAGE_CONTENT.length - 1){ goToPracticeQuiz(); }
      else { goTo(state.current+1); }
    });
    prevBtn.addEventListener('click', ()=>goTo(state.current-1));
    document.addEventListener('keydown', (e)=>{
      if(menuScreen.classList.contains('active')){
        if(e.key === 'ArrowRight'){
          if(state.current >= PAGE_CONTENT.length - 1){ goToPracticeQuiz(); }
          else { goTo(state.current+1); }
        }
        if(e.key === 'ArrowLeft'){ goTo(state.current-1); }
      }
    });
    let startX = null;
    slidesEl.addEventListener('touchstart', (e)=>{ startX = e.touches[0].clientX; }, {passive:true});
    slidesEl.addEventListener('touchend', (e)=>{
      if(startX === null) return;
      const dx = e.changedTouches[0].clientX - startX;
      if(Math.abs(dx) > 50){
        if(dx < 0){
          if(state.current >= PAGE_CONTENT.length - 1){ goToPracticeQuiz(); }
          else { goTo(state.current+1); }
        } else {
          goTo(state.current-1);
        }
      }
      startX = null;
    }, {passive:true});

    startBtn.addEventListener('click', ()=>{
      showScreen(menuScreen);
      buildMenu();
      buildSlides();
      goTo(0);
    });
    resumeBtn.addEventListener('click', ()=>{
      showScreen(menuScreen);
      buildMenu();
      buildSlides();
      updateActive();
    });
    backToWelcomeBtn.addEventListener('click', ()=> showScreen(welcomeScreen));
    goToFirstBtn.addEventListener('click', ()=>{ showScreen(menuScreen); goTo(0); });

    submitQuizBtn.addEventListener('click', ()=>{
      let correct = 0, answered = 0;
      for(let i=0;i<QUIZ.length;i++){
        const sel = state.quizAnswers[i];
        if(sel !== null){ answered++; }
        if(sel === QUIZ[i].a){ correct++; }
      }
      const pct = Math.round(100 * correct / QUIZ.length);
      quizScoreEl.textContent = 'Score: '+correct+'/'+QUIZ.length+' ('+pct+'%)';
      quizScoreEl.style.display = 'inline-flex';
      retryQuizBtn.style.display = 'inline-flex';

      const passed = pct >= 80;
      state.quizPassed = passed;
      celebration.style.display = passed ? 'block' : 'none';
      encouragement.style.display = passed ? 'none' : 'block';

      if(answered < QUIZ.length){
        alert('You answered '+answered+'/'+QUIZ.length+'. Please complete all questions for best results.');
      }
      saveState();
    });
    retryQuizBtn.addEventListener('click', ()=>{
      if(confirm('Clear your Practice Quiz answers and try again?')){
        state.quizAnswers = Array(QUIZ.length).fill(null);
        state.quizPassed = false;
        saveState();
        buildQuiz();
        quizScoreEl.style.display = 'none';
        celebration.style.display = 'none';
        encouragement.style.display = 'none';
        retryQuizBtn.style.display = 'none';
      }
    });

    if(toPrelabBtn){
      toPrelabBtn.addEventListener('click', ()=>{
        if(state.quizPassed){ showScreen(prelabScreen); }
        else { alert('Please score 80%+ on the Practice Quiz to unlock the Pre‑Lab.'); }
      });
    }
    if(reviewLessonsBtn){ reviewLessonsBtn.addEventListener('click', ()=> showScreen(menuScreen)); }
    if(retakeQuizBtn){
      retakeQuizBtn.addEventListener('click', ()=>{
        state.quizAnswers = Array(QUIZ.length).fill(null);
        state.quizPassed = false;
        saveState();
        buildQuiz();
        quizScoreEl.style.display = 'none';
        celebration.style.display = 'none';
        encouragement.style.display = 'none';
        retryQuizBtn.style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
    if(reviewFromEncourageBtn){ reviewFromEncourageBtn.addEventListener('click', ()=> showScreen(menuScreen)); }
    if(retakeFromEncourageBtn){
      retakeFromEncourageBtn.addEventListener('click', ()=>{
        state.quizAnswers = Array(QUIZ.length).fill(null);
        state.quizPassed = false;
        saveState();
        buildQuiz();
        quizScoreEl.style.display = 'none';
        encouragement.style.display = 'none';
        retryQuizBtn.style.display = 'none';
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }

    function hydratePrelabInputs(){
      plName.value = state.prelab.name || '';
      plDate.value = state.prelab.date || '';
      const setRadio = (name, val)=>{
        const radios = prelabForm.querySelectorAll('input[name="'+name+'"]');
        radios.forEach(r=>{ r.checked = (r.value === val); });
      };
      setRadio('q1', state.prelab.q1);
      setRadio('q2', state.prelab.q2);
      const q3_time = prelabForm.querySelector('select[name="q3_time"]');
      const q3_surv = prelabForm.querySelector('select[name="q3_survival"]');
      if(q3_time) q3_time.value = state.prelab.q3_time || '';
      if(q3_surv) q3_surv.value = state.prelab.q3_survival || '';
    }
    plName.addEventListener('input', ()=>{ state.prelab.name = plName.value; saveState(); });
    plDate.addEventListener('change', ()=>{ state.prelab.date = plDate.value; saveState(); });
    prelabForm.addEventListener('change', (e)=>{
      const t = e.target;
      if(!t.name) return;
      if(t.name === 'q1' || t.name === 'q2'){
        state.prelab[t.name] = t.value;
      } else if(t.name === 'q3_time' || t.name === 'q3_survival'){
        state.prelab[t.name] = t.value;
      }
      saveState();
    });

    prelabForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const missing = [];
      if(!plName.value.trim()) missing.push('Name');
      if(!plDate.value) missing.push('Date');
      if(!state.prelab.q1) missing.push('Q1');
      if(!state.prelab.q2) missing.push('Q2');
      if(!state.prelab.q3_time || !state.prelab.q3_survival) missing.push('Q3');
      if(missing.length){
        alert('Please complete: '+missing.join(', '));
        return;
      }
      answersList.innerHTML = '';
      const li1 = document.createElement('li'); li1.textContent = 'Q1: '+state.prelab.q1;
      const li2 = document.createElement('li'); li2.textContent = 'Q2: '+state.prelab.q2;
      const li3 = document.createElement('li'); li3.textContent = 'Q3: Time → '+state.prelab.q3_time+'; % Survival → '+state.prelab.q3_survival;
      answersList.appendChild(li1); answersList.appendChild(li2); answersList.appendChild(li3);

      certName.textContent = state.prelab.name || '—';
      certDate.textContent = state.prelab.date || '—';
      prelabResults.style.display = 'block';

      setTimeout(()=>{ alert('Pre‑Lab complete! Right‑click → Print → Save as PDF, then upload your PDF (answers + certificate) to Canvas.'); }, 150);
      saveState();
    });

    resetPrelabBtn.addEventListener('click', ()=>{
      if(!confirm('Clear your Pre‑Lab entries?')) return;
      state.prelab = { name:'', date:'', q1:null, q2:null, q3_time:'', q3_survival:'' };
      saveState();
      prelabForm.reset();
      hydratePrelabInputs();
      prelabResults.style.display = 'none';
    });

    (function init(){
      loadState();
      // Build UI
      buildMenu();
      buildSlides();
      // Build quiz upfront for faster nav
      buildQuiz();
      // Progress
      let correct = 0;
      for(let i=0;i<PAGE_CONTENT.length;i++){
        if(state.answers['q'+i] === PAGE_CONTENT[i].answer){ correct++; }
      }
      const pct = Math.round(100 * correct / PAGE_CONTENT.length);
      progressFill.style.width = pct + '%';
      progressPct.textContent = pct + '%';
      if(state.current>0 || Object.keys(state.answers).length>0) resumeBtn.style.display = 'inline-flex';
      // Pre‑Lab hydration
      hydratePrelabInputs();
    })();
  </script>


</body></html>